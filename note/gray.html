<!DOCTYPE html><html><head><meta charset="utf-8"><title>心&amp;麓 - Xiang HongAi&#39;s Personal Website</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="icon" type="image/png" href="https://xinlu.ink/favicon.png"><link rel="shortcut icon" type="image/x-icon" href="https://xinlu.ink/favicon.ico"><link href="https://cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.min.css" rel="stylesheet"><script src="https://cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><meta name="description" content="灰度检测body,html{height:100%}body{margin:0}.hide{display:none}.wrapper{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1;display:flex;height:100%;background-color:#fff}.wrapper.active{z-index:2}.col"><meta property="og:type" content="website"><meta property="og:title" content="心&amp;麓 - Xiang HongAi&#39;s Personal Website"><meta property="og:url" content="https://xinlu.ink/note/gray.html"><meta property="og:site_name" content="心&amp;麓 - Xiang HongAi&#39;s Personal Website"><meta property="og:description" content="灰度检测body,html{height:100%}body{margin:0}.hide{display:none}.wrapper{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1;display:flex;height:100%;background-color:#fff}.wrapper.active{z-index:2}.col"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2020-04-04T06:24:39.596Z"><meta property="article:modified_time" content="2020-04-04T06:24:39.596Z"><meta property="article:author" content="小可"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@xianghongai"><link rel="icon" href="/favicon.png"><link href="/assets/iconfont/iconfont.css" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/css/style.css"></head><body><div id="page"><header id="header"><div id="header-inner" class="row"><h1 id="logo-wrap"><a id="logo" href="https://xinlu.ink"><i class="iconfont icon-logo" title="Xiang HongAi's Personal Website"></i></a></h1><nav id="main-nav"><a id="main-nav-toggle" class="nav-icon"></a> <a class="main-nav-link" href="/">首页</a> <a class="main-nav-link" href="/categories/tech/">技术笔记</a></nav><nav id="sub-nav"><a id="nav-search-btn" class="nav-icon" title="依赖谷歌进行站内搜索"></a></nav><div id="search-form-wrap"><form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://xinlu.ink"></form></div></div></header><div id="container"><main id="main" class="row"><article id="page-" class="article article-type-page" itemscope itemprop="blogPost"><div class="article-inner"><div class="article-meta"><span class="article-date"><i class="iconfont icon-edit" title="文章写作时间"></i> 2020-04-04</span></div><div class="article-entry" itemprop="articleBody"><!DOCTYPE html><html lang="zh-cmn-Hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>灰度检测</title><style>body,html{height:100%}body{margin:0}.hide{display:none}.wrapper{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1;display:flex;height:100%;background-color:#fff}.wrapper.active{z-index:2}.column{height:100%}.index{position:relative;display:block;font-size:12px;text-align:center;color:#ff1e00;text-shadow:1px 1px rgba(0,0,0,.3)}.gray-level-input{position:fixed;left:10px;bottom:10px;z-index:9}.gray-gradient{background-image:linear-gradient(90deg,#000,#fff)}.gray-block{flex-wrap:wrap;padding-right:5px;padding-left:5px}.gray-block .row{display:flex;width:100%;flex:none}.gray-block .column{margin:10px 5px}.switch{position:fixed;bottom:20px;left:50%;z-index:9;transform:translateX(-50%)}</style><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="心&麓 - Xiang HongAi's Personal Website" type="application/atom+xml"></head><body><div class="switch"> <input type="radio" name="switch" id="grayLevel" value="grayLevel" title="Level" data-type="level" checked="checked"> <input type="radio" name="switch" id="grayGradient" value="grayGradient" title="Gradient" data-type="gradient"> <input type="radio" name="switch" id="grayBlock" value="grayBlock" title="Block" data-type="block"></div> <input type="number" name="gray-level-input" class="gray-level-input" max="128" min="8" step="8" value="32"><div class="wrapper gray-level active" data-type="level"></div><div class="wrapper gray-gradient" data-type="gradient"></div><div class="wrapper gray-block" data-type="block"></div><script>
      function handleChecked($radio) {
        const $wrappers = document.querySelectorAll(".wrapper");
        const $grayLevelInput = getGrayLevelInput();

        $wrappers.forEach($wrapper => {
          if ($wrapper.dataset.type === $radio.dataset.type) {
            $wrapper.classList.add("active");
          } else {
            $wrapper.classList.remove("active");
          }

          if ($radio.dataset.type === "level") {
            $grayLevelInput.classList.remove("hide");
          } else {
            $grayLevelInput.classList.add("hide");
          }
        });
      }

      function handleDefault() {
        const $radios = document.querySelectorAll('input[name="switch"]');

        $radios.forEach($radio => {
          if ($radio.checked) {
            handleChecked($radio);
          }
        });
      }

      function changeHandler() {
        var $radio = event.target;
        const name = $radio.name;

        if (name !== "switch") return;

        handleChecked($radio);
      }

      function handleSwitch() {
        document.addEventListener("change", changeHandler, false);
      }

      function handleGrayLevel() {
        const $wrapper = document.querySelector(".gray-level");
        const $input = getGrayLevelInput();
        const length = $input.value;
        var $ele = "";

        for (let index = length; index > 0; index--) {
          let eleId = length - index + 1;

          $ele += `
            <section
              class="column column-${eleId}"
              style="width:${(1 / length) * 100}%; background-color:rgba(0, 0, 0, ${((100 / length) * index) / 100});">
                <span class="index" style="top:${((length - index) / length) * 100}%">${eleId}</span>
            </section>`;
        }

        $wrapper.innerHTML = $ele;
      }

      function handleGrayLevelInput() {
        const $input = getGrayLevelInput();
        $input.addEventListener("input", handleGrayLevel);
        $input.addEventListener("keyup", handleGrayLevel);
        $input.addEventListener("change", handleGrayLevel);
      }

      function handleGrayBlock() {
        const $wrapper = document.querySelector(".gray-block");
        var $ele = "";

        let inner_height = window.innerHeight;

        let row_lenght = 8;
        let column_length = 256 / row_lenght;
        let size = inner_height / row_lenght - 20;

        for (let row_index = 0; row_index < row_lenght; row_index++) {
          $ele += `<section class="row">`;
          for (let column_index = 0; column_index < column_length; column_index++) {
            let id = row_index * column_length + column_index;
            $ele += `
              <section
                class="column"
                style="width: ${size}px; height: ${size}px; background-color:rgb(${id}, ${id}, ${id});">
                  <span class="index">${id}</span>
              </section>`;
          }
          $ele += `</section>`;
        }

        $wrapper.innerHTML = $ele;
      }

      function getGrayLevelInput() {
        return document.querySelector(".gray-level-input");
      }

      document.addEventListener("DOMContentLoaded", function() {
        handleGrayLevel();
        handleGrayLevelInput();
        handleGrayBlock();
        handleSwitch();
        handleDefault();

        $(window).on("resize", Test);
      });

      window.addEventListener('resize', function() {
        handleGrayLevel();
        handleGrayBlock();
      }, true);

      console.log("能识别到 253 吗?");
    </script></body></html><p>（本篇结束）</p></div><div class="article-licenses"><p>许可协议：自由转载-保持署名-非商业性使用-禁止演绎 (<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh">CC BY-NC-ND 4.0</a>)</p><p>By <a href="https://xinlu.ink">小可</a> from <a href="https://xinlu.ink/note/gray.html">https://xinlu.ink/note/gray.html</a></p><p><i class="iconfont icon-creative_commons_licenses" title="知识共享许可协议"></i><i class="iconfont icon-Noncommercial" title="非商业性使用"></i><i class="iconfont icon-Attribution" title="保持署名"></i><i class="iconfont icon-No_Derivative_Works" title="禁止演绎"></i></p></div><footer class="article-footer"> <a data-url="https://xinlu.ink/note/gray.html" data-id="ck8l8jjwu000eaof49bnc3rg8" class="article-share-link">Share</a> <a href="https://xinlu.ink/note/gray.html#disqus_thread" class="article-comment-link">留言 (Disqus)</a></footer></div></article><section id="comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></section></main></div><footer id="footer"><div id="footer-info" class="row"> &copy; 2021 <a href="mailto:xianghongai@gmail.com">心&amp;麓 - Xiang HongAi&#39;s Personal Website</a> <a class="my__github" href="https://github.com/xianghongai" target="_blank"><svg height="32" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></a></div><script type="text/javascript">!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script"),ga("create","UA-118291798-1","auto"),ga("send","pageview")</script></footer></div><script>var disqus_shortname="xinlu",disqus_url="https://xinlu.ink/note/gray.html";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="stylesheet" href="/fancybox/jquery.fancybox.css"><script src="/fancybox/jquery.fancybox.pack.js"></script><script src="//cdn1.lncld.net/static/js/3.1.1/av-min.js"></script><script id="leancloud">AV.init({appId:"hD9Ud7P3imssNuS9bQ3yR8Nw-gzGzoHsz",appKey:"ogVSezRAFR9Br6RTBx3TTW7n"})</script><script src="/js/script.js"></script><nav id="mobile-nav"> <a href="/" class="mobile-nav-link">首页</a> <a href="/categories/tech/" class="mobile-nav-link">技术笔记</a></nav><div class="page-pendant"><i class="iconfont icon-top js_top hidden" title="返回顶部"></i></div></body></html>